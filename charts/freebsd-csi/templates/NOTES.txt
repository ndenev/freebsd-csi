FreeBSD CSI Driver has been installed!

Release: {{ .Release.Name }}
Namespace: {{ .Release.Namespace }}

Components deployed:
  - CSIDriver: {{ .Values.driver.name }}
  - Controller Deployment: {{ include "freebsd-csi.fullname" . }}-controller
  - Node DaemonSet: {{ include "freebsd-csi.fullname" . }}-node

Agent endpoint: {{ .Values.agent.endpoint }}
{{- if .Values.tls.enabled }}
TLS: Enabled (using secret: {{ include "freebsd-csi.tlsSecretName" . }})
{{- else }}
TLS: Disabled (plaintext connection to agent)
{{- end }}

To verify the installation:

  kubectl get csidrivers
  kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

{{- if or .Values.storageClassIscsi.create .Values.storageClassNvmeof.create }}

StorageClasses created:
{{- if .Values.storageClassIscsi.create }}
  - {{ .Values.storageClassIscsi.name }} (iSCSI)
{{- end }}
{{- if .Values.storageClassNvmeof.create }}
  - {{ .Values.storageClassNvmeof.name }} (NVMeoF)
{{- end }}
{{- else }}

No StorageClasses were created. To create one, use values like:

  # For iSCSI:
  storageClassIscsi:
    create: true
    name: freebsd-zfs-iscsi
    parameters:
      portal: "<your-storage-server>:3260"

  # For NVMeoF (FreeBSD 15.0+):
  storageClassNvmeof:
    create: true
    name: freebsd-zfs-nvmeof
    parameters:
      transportAddr: "<your-storage-server>"
{{- end }}

To create a test PVC:

  apiVersion: v1
  kind: PersistentVolumeClaim
  metadata:
    name: test-pvc
  spec:
    accessModes:
      - ReadWriteOnce
    storageClassName: {{ if .Values.storageClassIscsi.create }}{{ .Values.storageClassIscsi.name }}{{ else if .Values.storageClassNvmeof.create }}{{ .Values.storageClassNvmeof.name }}{{ else }}freebsd-zfs-iscsi{{ end }}
    resources:
      requests:
        storage: 1Gi

For more information, visit: https://github.com/ndenev/freebsd-csi
